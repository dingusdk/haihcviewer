<link rel="import" href="/ihcviewer/ihc-tree-node.html" />

<dom-module id="ha-panel-ihcviewer">
  <template>
    <style include="ihc-tree-node">
      #ihcviewer {
        width: 100%;
        height: calc(100% - 10px);
      }
      #title {
        background-color: var(--app-header-background-color);
        color: var(--app-header-text-color);
        font-size: x-large;
        padding: 15px;
        flex: 0;
        height: 50px;
      }
      #content {
        height: calc(100% - 50px);
      }
      .flex-contianer {
        display: flex;
        flex-direction: column;
        align-items: stretch;
      }
      .topbox {
        flex: 1;
        overflow-y: auto;
      }
      #log {
        padding: 10px;
      }
      #ihcproperties {
        flex: 0;
        padding-top: 5px;
        padding-left: 20px;
        height: 100px;
        font-size: 14px;
        border-top: solid 1px gray;
        background-color: var(--primary-background-color);
        cursor: default;
      }
      #copyres {
        cursor: pointer;
      }
      h2 {
        font-size: large;
        font-weight: normal;
      }
      /* spinner */
      .loader {
        border: 16px solid #f3f3f3;
        border-radius: 50%;
        border-top: 16px solid #3498db;
        width: 50px;
        height: 50px;
        -webkit-animation: spin 2s linear infinite; /* Safari */
        animation: spin 2s linear infinite;
      }
      /* Safari */
      @-webkit-keyframes spin {
        0% {
          -webkit-transform: rotate(0deg);
        }
        100% {
          -webkit-transform: rotate(360deg);
        }
      }
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style>
    <div id="ihcviewer" class="flex-contianer">
      <div id="title">IHC Viewer</div>
      <div id="content" class="flex-contianer">
        <div class="topbox">
          <div hidden$="[[!isProjectLoading]]" class="loader"></div>
          <div id="ihcprojecttree">
            <ul>
              <template
                is="dom-repeat"
                items="{{ihcproject.Groups}}"
                as="group"
              >
                <ihc-tree-node data="{{group}}"></ihc-tree-node>
              </template>
            </ul>
          </div>
          <div id="log">
            <h2>IHC controller log:</h2>
            <div hidden$="[[!isLogLoading]]" class="loader"></div>
            <pre id="ihc_log" hidden$="[[isLogLoading]]">{{log}}</pre>
          </div>
        </div>
        <div id="ihcproperties">
          <template is="dom-if" if="{{selected}}">
            <div>
              <span>Resource id:</span>
              <span id="resourceid"> {{selected.data.Id}}</span>
              <span
                id="copyres"
                title="copy resource id to clipboard"
                on-click="OnCopy"
              >
                <svg style="width: 16px; height: 16px" viewBox="0 0 24 24">
                  <path
                    fill="currentColor"
                    d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"
                  />
                </svg>
              </span>
            </div>
            <div><span>Type:</span><span> {{selectedtype}}</span></div>
            <div><span>Value:</span><span> {{selectedvalue}}</span></div>
          </template>
        </div>
      </div>
    </div>
  </template>
</dom-module>

<script src="/ihcviewer/jquery-2.2.3.min.js" type="text/javascript"></script>
<script src="/ihcviewer/ihcproject.js" type="text/javascript"></script>
<script src="/ihcviewer/panel.js" type="text/javascript"></script>
